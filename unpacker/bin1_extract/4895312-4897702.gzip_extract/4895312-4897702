--muLparTmarK00000
Filename: /DataObjects/AnonUsageTransDO.js
Content-Type: application/javascript

(function(){var a="/ePrintManifest.xml/UsageDataCollectionSetting";var e="/ePrintManifest.xml/ePrintConfigCap.xml";var c=[{name:"ep:AdminSetting"},{name:"ep:UserConsent"},{name:"ep:UserConsentSource"},{name:"ep:CollectedBy"},{name:"ep:UserLocation",type:"struct",schema:[{name:"ep:DevicePurpose"},{name:"ep:NumberOfEmployees",type:"struct",schema:[{name:"dd:Min",type:"int"},{name:"dd:Max",type:"int"}]}]}];var d=[{name:"epcap:UsageDataCollectionSetting",schema:[{name:"epcap:AdminSettingSupport",type:"array",elmName:"epcap:AdminSetting"},{name:"epcap:UserConsentSupport",type:"array",elmName:"epcap:UserConsent"},{name:"epcap:UserConsentSourceSupport",type:"array",elmName:"epcap:UserConsentSource"},{name:"epcap:CollectedBySupport",type:"array",elmName:"epcap:CollectedBy"},{name:"epcap:UserLocation",schema:[{name:"epcap:DevicePurposeSupport",type:"array",elmName:"epcap:DevicePurpose"},{name:"epcap:NumberOfEmployees",schema:[{name:"epcap:Min",type:"int"},{name:"epcap:Max",type:"int"}]}]}]}];var b=function(h,f){this._pageFrag=h;this.ePrintCapXmlDom=h.getLedmXml(e);this.ePrintCapJsObj=te.sXmlParser.parse(this.ePrintCapXmlDom,d);var g=this;if(f==null){f=function(){}}var i=function(){var j=h.getLedmXml(a);g.ePrintUserDataColSetDynJsObj=te.sXmlParser.parse(j,c);this.ePrintCapXmlDom=h.getLedmXml(e);this.ePrintCapJsObj=te.sXmlParser.parse(this.ePrintCapXmlDom,d);f()};if(this.checkDynFileExists()!=undefined){this._pageFrag.get({file:a,dataType:"ledm"},i)}};b.prototype.reloadLedmXml=function(h){var g=this;var f=function(j){var i=g._pageFrag.getLedmXml(a);g.ePrintUserDataColSetDynJsObj=te.sXmlParser.parse(i,c);h()};g._pageFrag.get({file:a,dataType:"ledm"},f)};b.prototype.hideAnonUsageTrans=function(){var f=true;if(this.ePrintUserDataColSetDynJsObj.AdminSetting=="enabled"&&this.ePrintUserDataColSetDynJsObj.UserConsent!="neverOffered"&&this.ePrintUserDataColSetDynJsObj.CollectedBy=="cloud"){f=false}else{f=true}return f};b.prototype.checkDynFileExists=function(){return this.ePrintCapJsObj.UsageDataCollectionSetting};b.prototype.getUserDataColDynObj=function(){return this.ePrintUserDataColSetDynJsObj};b.prototype.getePrintCapJsObj=function(){return this.ePrintCapJsObj};b.prototype.updateToServer=function(h,f){var g=this._pageFrag.getLedmXml(a);te.sXmlParser.toXml(g,c,this.ePrintUserDataColSetDynJsObj,{overwrite:true});this._pageFrag.put({file:a,dataType:"ledm"},f)};apps.AnonUsageTransDO=b})();
--muLparTmarK00000
Filename: /webApps/AnonymousTransmission/AnonymousTransmission.htf
Content-Type: text/htf

<form><p>"L@S#4546"</p><p>"L@S#4771"</p><div class="gui-indent-radio"><ul><li>"L@S#4552"</li><li>"L@S#4553"</li><li>"L@S#4554"</li><li>"L@S#4555"</li><li>"L@S#4556"</li><li>"L@S#4557"</li></ul></div><p>"L@S#3409"</p><p><div id="anoy-usage-trans-info-fields-checkbox" class="gui-indent-checkbox"></div></p><div id="where-is-the-printer-used-div" class="where-is-the-printer-used-div">"L@S#4670"</div><div id="printer-location-div" class="gui-indent-radio"><div id="anoy-usage-trans-info-fields" class="gui-input-group gui-indent-radio"></div></div><p><br>"L@S#3224":</br>"L@S#4772" "L@S#4773" <span id="anonyTransNote">"L@S#4774" </span></p><div id="app-page-btns"></div></form>
--muLparTmarK00000
Filename: /webApps/AnonymousTransmission/AnonymousTransmission.js
Content-Type: application/javascript

(function(){var e;var f;var b;var d=apps.AnonymousTransmission.pgAnonymousTransmission;d.AnonTransValuesMap={homePersonal:{text:"L@S#4671",title:"L@S#4671"},homeBusiness:{text:"L@S#4672",title:"L@S#4672"},business:{text:"L@S#4673",title:"L@S#4673"},businessgreaterthan9:{text:"L@S#4674",title:"L@S#4674"}};d.preProcessTemplate=function(){b={thisPageFrag:this,anonUsgaeTranDOObj:null,webFirmwareUpdateDOObj:null}};d.onLoad=function(){b.form=new gui.Form();b.anonUsgaeTranDOObj=new apps.AnonUsageTransDO(this,function(){b.uDCSDynObj=b.anonUsgaeTranDOObj.getUserDataColDynObj();b.ePrintCapJsObj=b.anonUsgaeTranDOObj.getePrintCapJsObj();b.productConfigDOObj=new apps.ProductConfigDO(b.thisPageFrag);f=$.hlp.countryMap.HPCOM[b.productConfigDOObj.getCountryAndRegion()];var h=$.hlp.langCodeMap[te.getDisplayLang()];e=h.hpCom||h.code2d;var g="http://www8.hp.com/"+f+"/"+e+"/privacy/privacy.html";$("#anonyTransNote a").attr("href",g);$("#anonyTransNote a").attr("target","new");b.ePrintCapJsObj.UsageDataCollectionSetting.UserLocation.DevicePurposeSupport.push("businessgreaterthan9");b.AnonTranCheckBox=b.form.createAdd("anoy-usage-trans-info-fields-checkbox",new gui.CheckBox({text:te.loc("L@S#4669"),title:te.loc("L@S#4669"),onClick:function(){b.AnonTranSelectBtn.enable(this.val());if(this.val()){$("#printer-location-div").show();$("#where-is-the-printer-used-div").show()}else{$("#printer-location-div").hide();$("#where-is-the-printer-used-div").hide()}}}));b.AnonTranCheckBox.val(b.uDCSDynObj.UserConsent=="optedIn");b.AnonTranSelectBtn=b.form.createAdd("anoy-usage-trans-info-fields",new gui.Radio({optionArray:b.ePrintCapJsObj.UsageDataCollectionSetting.UserLocation.DevicePurposeSupport,locMap:d.AnonTransValuesMap,errLabel:"L@S#4670",radioGroupLabelCls:"where-is-the-printer-used-div",onValidateActions:["emptyCheck"]}));if(b.uDCSDynObj.UserLocation.NumberOfEmployees!=undefined){if(b.uDCSDynObj.UserLocation.DevicePurpose=="business"&&b.uDCSDynObj.UserLocation.NumberOfEmployees.Min=="1"){b.AnonTranSelectBtn.val("business")}else{if(b.uDCSDynObj.UserLocation.DevicePurpose=="business"&&b.uDCSDynObj.UserLocation.NumberOfEmployees.Min=="10"){b.AnonTranSelectBtn.val("businessgreaterthan9")}}}else{b.AnonTranSelectBtn.val(b.uDCSDynObj.UserLocation.DevicePurpose)}b.AnonTranSelectBtn.enable(b.AnonTranCheckBox.val());if(b.AnonTranCheckBox.val()){$("#printer-location-div").show();$("#where-is-the-printer-used-div").show()}else{$("#printer-location-div").hide();$("#where-is-the-printer-used-div").hide()}});b.form.setCmdBtns(gui.createApplyCancelCmdBtns("#app-page-btns",c))};d.onUnLoad=function(){b=null};function c(j,i){var h=b.AnonTranSelectBtn.val();var g=b.AnonTranCheckBox.val();if(g){b.uDCSDynObj.UserConsent="optedIn";b.uDCSDynObj.UserConsentSource="EWS"}else{b.uDCSDynObj.UserConsent="optedOut";b.uDCSDynObj.UserConsentSource="EWS"}if(h=="business"){b.uDCSDynObj.UserLocation.NumberOfEmployees={};b.uDCSDynObj.UserLocation.DevicePurpose="business";b.uDCSDynObj.UserLocation.NumberOfEmployees.Min="1";b.uDCSDynObj.UserLocation.NumberOfEmployees.Max="9"}else{if(h=="businessgreaterthan9"){b.uDCSDynObj.UserLocation.NumberOfEmployees={};b.uDCSDynObj.UserLocation.NumberOfEmployees.Min="10";b.uDCSDynObj.UserLocation.NumberOfEmployees.Max="";b.uDCSDynObj.UserLocation.DevicePurpose="business"}else{b.uDCSDynObj.UserLocation.DevicePurpose=h}}switch(i){case"apply":if(!b.form.validate()){break}b.webFirmwareUpdateDOObj=new apps.webFWUpgradeDO(b.thisPageFrag,"",function(){if(b.AnonTranCheckBox.val()&&(b.webFirmwareUpdateDOObj.isUpdateLocked()||(!b.webFirmwareUpdateDOObj.isAutoUpdateEnabled()))){var k;if((f=="us"||f=="uk")&&(e=="en")){k={title:"L@S#4743",contents:te.loc("L@S#4775")+gui.emitHtml("p",null,te.loc("L@S#4776",'<a href="http://gnb.hpconnected.com/gnb/hpctou">HP Connected</a>'))+gui.emitHtml("p",null,te.loc("L@S#4746"))}}else{k={title:"L@S#4743",contents:te.loc("L@S#4775")+gui.emitHtml("p",null,te.loc("L@S#4776",'<a href="http://www8.hp.com/'+f+"/"+e+'/privacy/terms-of-use.html">HP Connected</a>'))+gui.emitHtml("p",null,te.loc("L@S#4746"))}}gui.YNDialogBox.show(k,function(l){if(l==true){b.anonUsgaeTranDOObj.updateToServer(b.uDCSDynObj,function(m){if(m.hasErr){a(m)}else{b.webFirmwareUpdateDOObj.isUpdateLockable(true);b.webFirmwareUpdateDOObj.isUpdateLocked(false);b.webFirmwareUpdateDOObj.enableAutoUpdate(true);b.webFirmwareUpdateDOObj.updateToServer(b.thisPageFrag,function(n){gui.showResultScrn(b.thisPageFrag,n)})}})}else{b.anonUsgaeTranDOObj.updateToServer(b.uDCSDynObj,function(m){if(m.hasErr){a(m)}else{gui.showResultScrn(b.thisPageFrag,m)}})}})}else{b.anonUsgaeTranDOObj.updateToServer(b.uDCSDynObj,function(l){if(l.hasErr){a(l)}else{gui.showResultScrn(b.thisPageFrag,l)}})}});break;case"cancel":b.thisPageFrag.reload();break;default:return false}}function a(g){var i=false;var h=200;var j="L@S#2128";i=true;h=g[0].pgmStatus;if(i){switch(h){case 403:gui.OKDialogBox.show({title:j,contents:te.loc("L@S#3149")+"  "+te.loc("L@S#3150")+gui.emitHtml("p",null,te.loc("L@S#3151"))},function(){b.thisPageFrag.reload()});break;default:gui.showResultScrn(b.thisPageFrag,g);break}}return}})();
