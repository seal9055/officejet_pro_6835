--muLparTmarK00000
Filename: /webApps/ScheduleOnOff/ScheduleOnOff.js
Content-Type: application/javascript

if(SchOnOff==undefined){var SchOnOff=new Object()}(function(){var a;var c="07:00:00";var b="19:00:00";function e(f){this.radioBtn=null;this.timeCtrl=null;this.timeEnabled=f;this.daysInfo={monday:{isDefault:true,labels:"L@S#2977",chkBox:null},tuesday:{isDefault:true,labels:"L@S#2978",chkBox:null},wednesday:{isDefault:true,labels:"L@S#2979",chkBox:null},thursday:{isDefault:true,labels:"L@S#2980",chkBox:null},friday:{isDefault:true,labels:"L@S#2981",chkBox:null},saturday:{isDefault:false,labels:"L@S#2982",chkBox:null},sunday:{isDefault:false,labels:"L@S#2983",chkBox:null},all:{isDefault:false,labels:"L@S#2976",chkBox:null}}}var d={on:new e(c),off:new e(b)};SchOnOff.SchOnOffMap={disabled:{text:"L@S#0264",title:"L@S#0264"},enabled:{text:"L@S#0363",title:"L@S#0363"}};SchOnOff.getSchOnOffStatusOpts=function(){return["disabled","enabled"]};SchOnOff.Validate=function(){var h=d.on.timeCtrl.getHrVal();var p=d.on.timeCtrl.getMinVal();var g=d.off.timeCtrl.getHrVal();var q=d.off.timeCtrl.getMinVal();var i=d.on.timeCtrl.getAmPmVal();var s=d.off.timeCtrl.getAmPmVal();var k,j,o,n;var r=true;var l=0;var f=0;if(d.on.radioBtn.val()=="disabled"||d.off.radioBtn.val()=="disabled"){return r}for(var m in d.on.daysInfo){if(m=="all"){continue}if((d.on.daysInfo[m].chkBox==null)||(d.on.daysInfo[m].chkBox.val()==false)){continue}if((d.off.daysInfo[m].chkBox!=null)&&(d.off.daysInfo[m].chkBox.val()==true)){o=parseInt(p,10)+parseInt(l,10)+parseInt(h,10)*60;n=parseInt(q,10)+parseInt(f,10)+parseInt(g,10)*60;if(Math.abs(o-n)<60){r=te.loc("L@S#3059");break}else{if(i!=s){if(o<n){o=o+1440}else{n=n+1440}if(Math.abs(o-n)<60){r=te.loc("L@S#3059")}break}else{r=true}}}}return r};SchOnOff.enableControls=function(g,h){g.timeCtrl.enable(h);for(var f in g.daysInfo){if(g.daysInfo[f].chkBox){g.daysInfo[f].chkBox.enable(h)}}};SchOnOff.checkAllDays=function(g){var h=g.daysInfo.all.chkBox.val();for(var f in g.daysInfo){if(g.daysInfo[f].chkBox){g.daysInfo[f].chkBox.val(h)}}};SchOnOff.isAllCheckBoxSameValue=function(g,h){var j=true;for(var f in g.daysInfo){if(f=="all"){continue}if(g.daysInfo[f].chkBox){if(g.daysInfo[f].chkBox.val()!=h){j=false;break}}}return j};SchOnOff.preProcessTemplate=function(){a=this};SchOnOff.pgScheduleOnOffOnLoad=function(){var l=new gui.Form();var h=new apps.ProductConfigDO(a);var g=h.getSchOnOffObj();var f=new apps.ConsumableConfigDO(a);var k=g.ProductSettings.ScheduledOffScheduledOnTime.ScheduledOn;var j=g.ProductSettings.ScheduledOffScheduledOnTime.ScheduledOff;var i={on:{availableDays:h.getProp("ProductSettings.ScheduledOffScheduledOnTime.ScheduledOn.AutoOnTimeAndDaySetting.DaysOfWeek").optionArray,prodCfg:k,enabledDays:k.AutoOnTimeAndDaySetting.DaysOfWeek,timeSetting:k.AutoOnTimeSetting,timeValue:k.AutoOnTimeAndDaySetting.AutoOnTimeValue},off:{availableDays:h.getProp("ProductSettings.ScheduledOffScheduledOnTime.ScheduledOff.AutoOffTimeAndDaySetting.DaysOfWeek").optionArray,prodCfg:j,enabledDays:j.AutoOffTimeAndDaySetting.DaysOfWeek,timeSetting:j.AutoOffTimeSetting,timeValue:j.AutoOffTimeAndDaySetting.AutoOffTimeValue}};$.each(["on","off"],function(n,r){d[r].radioBtn=new gui.Radio({optionArray:SchOnOff.getSchOnOffStatusOpts(),locMap:SchOnOff.SchOnOffMap,onClick:function(t){SchOnOff.enableControls(d[r],d[r].radioBtn.val()==="enabled");if(gui.isTheatreLNF()&&gui.isMobileView()){if(d.on.radioBtn.val()=="disabled"){$(".sched-on-info").hide()}else{$(".sched-on-info").show()}if(d.off.radioBtn.val()=="disabled"){$(".sched-off-info").hide()}else{$(".sched-off-info").show()}}if(d[r].radioBtn.val()=="enabled"){if(SchOnOff.isAllCheckBoxSameValue(d[r],false)==true){d[r].timeCtrl.val(d[r].timeEnabled);for(var u in d[r].daysInfo){if((d[r].daysInfo[u].chkBox)&&(d[r].daysInfo[u].isDefault)){d[r].daysInfo[u].chkBox.val(true)}}}}}});if(r=="on"){d[r].radioBtn.create("autostartup_RadButtons")}else{d[r].radioBtn.create("autoshutdown_RadButtons")}d[r].radioBtn.val(i[r].timeSetting);l.add(d[r].radioBtn);d[r].timeCtrl=new gui.TimeWidget({timeFormat:"HR12",timeType:"HH:MM",title:"L@S#0744",onValidate:SchOnOff.Validate});if(r=="on"){d[r].timeCtrl.create("SchOnOff_start_time")}else{d[r].timeCtrl.create("SchOnOff_shutdown_time")}d[r].timeCtrl.val(i[r].timeValue);l.add(d[r].timeCtrl);var s;if(i[r].availableDays){var o=i[r].availableDays;o.push("all");for(var m in o){s=o[m];d[r].daysInfo[s].chkBox=new gui.CheckBox({text:d[r].daysInfo[s].labels,title:d[r].daysInfo[s].labels,onClick:function(t){if(this.opts.text=="L@S#2976"){SchOnOff.checkAllDays(d[r])}else{var u=SchOnOff.isAllCheckBoxSameValue(d[r],true);d[r].daysInfo.all.chkBox.val(u)}}});d[r].daysInfo[s].chkBox.create(s+"_aut"+r);l.add(d[r].daysInfo[s].chkBox);if((i[r].enabledDays)&&($.inArray(s,i[r].enabledDays)>=0)){d[r].daysInfo[s].chkBox.val(true)}if(gui.isTheatreLNF()&&gui.isMobileView()){var p=$(gui.mkQId(s+"_aut"+r));p.removeClass("w300pc left");if(s=="all"){p.siblings().removeClass("w300pc left")}else{p.siblings().addClass("gui-hidden")}}}var q=SchOnOff.isAllCheckBoxSameValue(d[r],true);d[r].daysInfo.all.chkBox.val(q)}SchOnOff.enableControls(d[r],d[r].radioBtn.val()==="enabled")});if(gui.isTheatreLNF()&&gui.isMobileView()){$("#autostartup_RadButtons").parent().siblings().removeClass("gui-indent-radio");$("#autoshutdown_RadButtons").parent().siblings().removeClass("gui-indent-radio");$("#SchOnOff_start_time").addClass("ca");$("#SchOnOff_start_time select").addClass("w300pc gui-horz-margin-33");$("#SchOnOff_shutdown_time").addClass("ca");$("#SchOnOff_shutdown_time select").addClass("w300pc gui-horz-margin-33");if(d.on.radioBtn.val()=="disabled"){$(".sched-on-info").hide()}else{$(".sched-on-info").show()}if(d.off.radioBtn.val()=="disabled"){$(".sched-off-info").hide()}else{$(".sched-off-info").show()}te.processHeaderExpandCollapse()}gui.createApplyCancelCmdBtns("#SchOnOff-cmd-btns",function(o,n){switch(n){case"apply":var m=function(){var r=false;if(f.isSACM()&&f.isAnyInkMissing()){r=true}var s=te.loc("L@S#0185");if(r&&d.off.radioBtn.val()=="enabled"){s+=("<br>"+te.loc("L@S#3239")+te.loc("L@S#3240"))}i.on.enabledDays=k.AutoOnTimeAndDaySetting.DaysOfWeek=[];i.off.enabledDays=j.AutoOffTimeAndDaySetting.DaysOfWeek=[];$.each(["on","off"],function(w,y){var x=0;$.each(i[y].availableDays,function(z,A){if(A=="all"){return true}if(d[y].daysInfo[A].chkBox.val()==true){i[y].enabledDays[x++]=A}})});i.on.prodCfg.AutoOnTimeSetting=d.on.radioBtn.val();i.on.prodCfg.AutoOnTimeAndDaySetting.AutoOnTimeValue=d.on.timeCtrl.val();i.off.prodCfg.AutoOffTimeSetting=d.off.radioBtn.val();i.off.prodCfg.AutoOffTimeAndDaySetting.AutoOffTimeValue=d.off.timeCtrl.val();var u={callback:function q(w){if(w.hasErr){gui.showResultScrn(a,w,{header:"L@S#2974",errMsgs:{409:"L@S#3059"}})}else{gui.showResultScrn(a,w,{header:"L@S#2987",msg:s})}}};var p=new apps.cloudPrint.cloudprintObj(a);var t={title:"L@S#2974",contents:te.loc("L@S#4168")+gui.emitHtml("p",null,te.loc("L@S#3332"))};var v=false;if(i.off.prodCfg.AutoOffTimeSetting!="disabled"){if(te.hasWebServicesFeature()&&ews.SupportedPages.pgePrintOptIn){if(p.isRegistered()){v=true}}if(v){gui.YNDialogBox.show(t,function(w){if(w==true){h.updateToServer(u,g);return}})}else{h.updateToServer(u,g)}}else{h.updateToServer(u,g)}};if(l.validate()){f.reload(m)}break;case"cancel":a.reload();break;default:return false}})}})();
--muLparTmarK00000
Filename: /webApps/ScheduleOnOff/ScheduleOnOff.htf
Content-Type: text/htf

<form><div id="SchOnOff-errorMessage" class="gui-hidden"> <label>"EWS_STRING_SCHEDULE_ON_OFF_ERROR_NOTE1"</label> <ul><li>"EWS_STRING_SCHEDULE_ON_OFF_ERROR_NOTE2"</li></ul></div><div id="sched-on-div"><h2>"L@S#2985"</h2><p>"L@S#2971"</p><div class="gui-input-group"><div class="gui-field"><div id="autostartup_RadButtons"></div></div><div class="gui-indent-radio sched-on-info"><div class="gui-input-pair"> <label>"L@S#1328"</label> <div id="SchOnOff_start_time" class="gui-field"></div></div><div class="clear-fix"><div class="w300pc gui-input-pair-vert left left">"L@S#2984"</div><div id="all_auton" class="w300pc gui-input-pair-vert left"></div></div><div class="clear-fix"><div class="w300pc left">&nbsp;</div><div id="monday_auton" class="w300pc gui-input-pair-vert left"></div></div><div class="clear-fix"><div class="w300pc left">&nbsp;</div><div id="tuesday_auton" class="w300pc gui-input-pair-vert left"></div></div><div class="clear-fix"><div class="w300pc left">&nbsp;</div><div id="wednesday_auton" class="w300pc gui-input-pair-vert left"></div></div><div class="clear-fix"><div class="w300pc left">&nbsp;</div><div id="thursday_auton" class="w300pc gui-input-pair-vert left"></div></div><div class="clear-fix"><div class="w300pc left">&nbsp;</div><div id="friday_auton" class="w300pc gui-input-pair-vert left"></div></div><div class="clear-fix"><div class="w300pc left">&nbsp;</div><div id="saturday_auton" class="w300pc gui-input-pair-vert left"></div></div><div class="clear-fix"><div class="w300pc left">&nbsp;</div><div id="sunday_auton" class="w300pc gui-input-pair-vert left"></div></div></div></div></div><div id="sched-off-div"><h2>"L@S#2986"</h2><p class="hide-in-mobile">"L@S#2972"</p><p>"L@S#2973"</p><div class="gui-input-group"><div class="gui-field"><div id="autoshutdown_RadButtons"></div></div><div class="gui-indent-radio sched-off-info"><div class="gui-input-pair"> <label id="SchOnOff-shutdownLabel">"L@S#2975"</label> <div id="SchOnOff_shutdown_time" class="gui-field"></div></div><div class="clear-fix"><div class="w300pc gui-input-pair-vert left">"L@S#2984"</div><div id="all_autoff" class="w300pc gui-input-pair-vert left"></div></div><div class="clear-fix"><div class="w300pc left">&nbsp;</div><div id="monday_autoff" class="w300pc gui-input-pair-vert left"></div></div><div class="clear-fix"><div class="w300pc left">&nbsp;</div><div id="tuesday_autoff" class="w300pc gui-input-pair-vert left"></div></div><div class="clear-fix"><div class="w300pc left">&nbsp;</div><div id="wednesday_autoff" class="w300pc gui-input-pair-vert left"></div></div><div class="clear-fix"><div class="w300pc left">&nbsp;</div><div id="thursday_autoff" class="w300pc gui-input-pair-vert left"></div></div><div class="clear-fix"><div class="w300pc left">&nbsp;</div><div id="friday_autoff" class="w300pc gui-input-pair-vert left"></div></div><div class="clear-fix"><div class="w300pc left">&nbsp;</div><div id="saturday_autoff" class="w300pc gui-input-pair-vert left"></div></div><div class="clear-fix"><div class="w300pc left">&nbsp;</div><div id="sunday_autoff" class="w300pc gui-input-pair-vert left"></div></div></div></div></div><div id="SchOnOff-cmd-btns"></div></form>
